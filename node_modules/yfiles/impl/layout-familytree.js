/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.6.0.3.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2024 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
import y from"./core.js";import l from"./lang.js";import _a_ from"./algorithms.js";import _b_ from"./layout-core.js";import _c_ from"./layout-hierarchic.js";import _d_ from"./router-other.js";_a_.lang=l,_b_.lang=l,_c_.lang=l,_d_.lang=l,function($,f,i,n){"use strict";function t(f){var i=new $.C.GGD,n=i.$Ybh;n.$Zyh=new $.C.DHD.$u(0,!1),n.$pkh=60,n.$djh=20;var t=i.$ebh;switch(f.$f7){case-1:t.$bIh=0;break;case 0:t.$bIh=.5;break;case 1:t.$bIh=1}return i}function l($,f,i){for(var n=0,t=0,l=f.$fph();l.$lz;l.$UE()){var r=l.$xA;1===i.$fF(r)?r.$f7>0&&t++:n+=r.$f6}return t<=1&&2===n}function r(f,i,n){var t=i.$gFi($.O.$p56);f.$f16=i.$qsi(),f.$f17=i.$qsi(),f.$f3=i.$qsi(),f.$f4=i.$qsi(),f.$f12 instanceof $.C.GGD&&0!==f.$f20&&(f.$f=f.$f12.$NSi(i)),function(f,i,n){f.$f5=$.HF.$m14(i.$fl),f.$f1=new $.LE;var t=new $.LE;f.$f11=new $.C.RKB.$t,f.$f2=i.$rsi(),f.$f15=i.$rsi(),f.$f6=i.$rsi(),f.$f9=i.$rsi(),f.$f8=i.$rsi(),f.$f19=new $.SE;for(var l=i.$tti();l.$lz;l.$UE()){var r=new $.C.RKB.$t,a=l.$xA;f.$f2.$IL(a,"n"+a.$fW),1===i.$gFi($.O.$p56).$fF(a)?e(f,a,r):s(f,a,r);var o=new $.LE;o.$m(r),u(f,r,o);for(var h=0;h<o.$ms;h++)if((r=o.$ps(h)).$f1>1){for(var p=new $.LH.$c1("GN"),v=0;v<r.$f1;v++)p.$m2($.PF.$m8(r.$ps(v).$fW)),p.$m2("/");t.$m(p.toString()),f.$f1.$m(r)}}for(var m=0;m<f.$f1.$ms;m++){var c=new $.C.JJB(0,0,0,0),w=i.$hri(),r=f.$f1.$ps(m);f.$f11.$m6(w);for(var F=0;F<r.$f1;F++){var E=r.$ps(F);f.$f15.$IL(E,t.$ps(m)),f.$f9.$IL(E,n),f.$f8.$IL(E,c)}f.$f8.$IL(w,c),f.$f6.$Lu(w,!0),f.$f2.$IL(w,t.$ps(m))}i.$pVi($.O.$p4,f.$f2),i.$pVi($.O.$p36,f.$f15),i.$pVi($.O.$p3,f.$f6),i.$pVi($.O.$p70,f.$f8),i.$pVi($.O.$p26,f.$f9)}(f,i,n);for(var l=i.$gFi($.O.$p1),r=i.$tti();r.$lz;r.$UE()){var a=r.$xA;if(1===i.$gFi($.O.$p56).$fF(a)){for(var o=null,h=a.$gHi(null);h.$lz;h.$UE()){var p=h.$wA.$f3;if(null===o&&(o=p),i.$tXi(h.$wA,new $.C.SJB.$u(0,i.$m38(h.$wA.$f2).$UB/2)),i.$vXi(h.$wA,new $.C.SJB.$u(0,-i.$m38(h.$wA.$f3).$UB/2)),f.$f3.$IL(h.$wA,$.T.ADD.$u(2,!0)),f.$f4.$IL(h.$wA,$.T.ADD.$u(1,!0)),null!==f.$f&&o!==p){var v=null===l?o:l.$fF(o),m=null===l?p:l.$fF(p);(4===f.$f20||3===f.$f20)!==(2===t.$fF(p))?f.$f.$BO(v,m):f.$f.$EO(v,m)}}for(var c=new $.LE,w="CG"+a.$fW,F=a.$gHi(null);F.$lz;F.$UE()){var E=F.$wA;f.$f16.$IL(E,w);var g=f.$f15.$fF(E.$f3);null!==g&&-1!==c.indexOf(g)||(f.$f17.$IL(E,w),null!==g&&c.$m(g))}}}i.$pVi($.O.$p120,f.$f16),i.$pVi($.O.$p121,f.$f17),i.$pVi($.O.$p181,f.$f3),i.$pVi($.O.$p182,f.$f4)}function e(f,i,n){if(1!==i.$f2.$gFi($.O.$p56).$fF(i))throw $.NG.$m30(g[5]);if(!f.$f5[i.$fW]){n.$m6(i),f.$f5[i.$fW]=!0;for(var t=0,l=i.$Uui();l.$lz;l.$UE())if(s(f,l.$xA,n),++t>2)throw $.NG.$m30(g[6])}}function s(f,i,n){if(1===i.$f2.$gFi($.O.$p56).$fF(i))throw $.NG.$m30(g[7]);if(!f.$f5[i.$fW]){n.$m6(i),f.$f5[i.$fW]=!0;for(var t=i.$Kui();t.$lz;t.$UE())e(f,t.$xA,n)}}function u(f,i,n){var t=-1,l=-1;for(t=0;t<i.$f1;t++){var r=i.$ps(t);if(1===r.$f2.$gFi($.O.$p56).$fF(r)){for(var e=r.$Kui();e.$lz&&!((l=i.indexOf(e.$xA))>-1);e.$UE());if(l>-1)break}}if(-1!==l){var s=new $.C.RKB.$t,h=i.$ps(t),p=i.$ps(l),v=new $.C.RKB.$t;i.$gy(p),s.$m6(p);for(e=p.$Kui();e.$lz;e.$UE()){var m=e.$xA;i.$gy(m),s.$m6(m);for(var c=m.$Uui();c.$lz;c.$UE()){var w=c.$xA;w!==p&&(a(f,m,w,h,p)?o(f,m,i,s):v.$m6(m))}}if(i.$gqh()){i.$owi(s),v.$cy(),i.$gy(p),s.$m6(p);for(e=p.$Kui();e.$lz;e.$UE()){m=e.$xA;i.$gy(m),s.$m6(m),v.$m6(m)}}for(e=v.$fph();e.$lz;e.$UE())for(var F=e.$xA.$jFi(null);F.$lz;F.$UE())if(F.$wA.$f2!==p){var E=p.$f2;E.$tXi(F.$wA,new $.C.SJB.$u(0,0)),E.$vXi(F.$wA,new $.C.SJB.$u(0,0)),f.$f3.$IL(F.$wA,$.T.ADD.$u(0,!0)),f.$f4.$IL(F.$wA,$.T.ADD.$u(0,!0)),f.$f19.$m(F.$wA)}u(f,i,n),u(f,s,n),n.$m(s)}}function a(f,i,n,t,l){return function f(i,n,t,l,r,e){if(!$.QE.$m9(e,new $.T.ZED.T(n,t)))return!0;var s=!0;for(var u=t.$Kui();u.$lz;u.$UE()){var a=u.$xA;if(a!==n){if(a===l)return!1;for(var o=a.$Uui();o.$lz;o.$UE()){var h=o.$xA;if(h!==t&&!f(i,a,h,l,r,e)){s=!1;break}}}}return s}(f,i,n,t,l,new $.SE)}function o($,f,i,n){for(var t=f.$Uui();t.$lz;t.$UE()){var l=t.$xA;if(!(i.indexOf(l)<0)){i.$gy(l),n.$m6(l);for(var r=l.$Kui();r.$lz;r.$UE()){var e=r.$xA;i.indexOf(e)>-1&&(i.$gy(e),n.$m6(e),o($,e,i,n))}}}}function h($,f,i,n){for(var t=1,l=f.$Uui();l.$lz;l.$UE()){var r=l.$xA;if(r!==i&&-1===n.indexOf(r)){n.$m6(r);for(var e=r.$Kui();e.$lz;e.$UE()){var s=e.$xA;s!==f&&(t+=h($,s,r,n))}}}return t}var p=f.lang.ClassDefinition,v=(f.lang.InterfaceDefinition,f.lang.AttributeDefinition,f.lang.EnumDefinition),m=(f.lang.StructDefinition,f.lang.Abstract,f.lang.module),c=(f.lang.delegate,f.lang.Boolean,f.lang.Number,f.lang.Void,f.lang.Object),w=(f.lang.String,f.lang.decorators.Type),F=f.lang.decorators.SetterArg,E=f.lang.decorators.OptionArgs;f.lang.addMappings("yFiles-for-HTML-Complete-2.6.0.3-Evaluation (Build 4c1a55da59b6-02/15/2024)",{get _$_mzd(){return["alignment","$co",w("yfiles._R.C.BFD",5)]},_$_nzd:["topLayout","$do"],_$_pvf:["partnerlessBelow","$ZPh"],_$_asg:["offsetForFamilyNodes","$Obh"],_$_lbh:["familyNodesAlwaysBelow","$Igh"],get _$_fmh(){return["familyMembersSortingPolicy","$klh",w("yfiles._R.C.CFD",5)]},_$_inh:["spacingBetweenFamilyMembers","$Qmh"],get _$_wpo(){return["FamilyTreeLayout","ZED",E(F("topLayout"),F("spacingBetweenFamilyMembers"),F("offsetForFamilyNodes"),F("partnerlessBelow"),F("familyNodesAlwaysBelow"),F("alignment","yfiles._R.C.BFD"),F("parallelEdgeRouterEnabled"),F("selfLoopRouterEnabled"),F("familyMembersSortingPolicy","yfiles._R.C.CFD"),F("labeling"),F("selfLoopRouter"),F("parallelEdgeRouter"),F("componentLayout"),F("subgraphLayout"),F("hideGroupsStage"),F("orientationLayout"),F("orientationLayoutEnabled"),F("layoutOrientation","yfiles._R.C.FZC"),F("labelingEnabled"),F("hideGroupsStageEnabled"),F("componentLayoutEnabled"),F("subgraphLayoutEnabled"))]},_$_xpo:["FamilyType","AFD"],_$_ypo:["VerticalNodeAlignment","BFD"],_$_zpo:["FamilyMembersSortingPolicy","CFD"],_$$_zcb:["yfiles.genealogy","yfiles._R.T","yfiles._R.C"]});var g=["Unknown alignment.","DataProvider "," is not registered to the graph.","FamilyTreeLayout","FamilyTypeDpKey","Direct link between two individuals","Family node has more than two parent nodes","Direct link between two family nodes"];m("_$$_zcb",function($){$._$_zpo=new v(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})}),m("_$$_zcb",function(i){i._$_wpo=new p(function(){return{$extends:$.C.TBD,constructor:function(){$.C.TBD.call(this),this.$f=null,this.$bgh=!1,this.$jSh.$qsh=12,this.$f12=t(this)},$f16:null,$f17:null,$f3:null,$f4:null,$f19:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f21:null,$f22:null,$f12:null,$f24:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:0,_$_nzd:{get:function(){return this.$f12},set:function($){this.$f12=null===$?t(this):$}},"$m1!":function(){if(!this.$f24||0!==this.$f20)return!1;var f=this.$do;return $.C.XAD.isInstance(f)&&(f=f.$OC),f instanceof $.C.GGD},_$_inh:{get:function(){return this.$f13},set:function(f){if(f<0)throw $.NG.$m2();this.$f13=f}},_$_asg:{get:function(){return this.$f14},set:function(f){if(f<0)throw $.NG.$m2();this.$f14=f}},_$_pvf:{get:function(){return this.$f10},set:function($){this.$f10=$}},_$_lbh:{get:function(){return this.$f18},set:function($){this.$f18=$}},_$_mzd:{get:function(){return this.$f7},set:function(f){var i=0;switch(f){case 1:i=1;break;case 0:i=.5;break;case-1:i=0;break;default:throw $.NG.$m18(g[0])}null!==this.$f12&&this.$f12 instanceof $.C.GGD&&(this.$f12.$ebh.$bIh=i),this.$f7=f}},$ylh:{set:function($){this.$f49=$}},$Eeh:{set:function($){this.$f32=$}},$f20:0,$f:null,_$_fmh:{get:function(){return this.$f20},set:function(f){switch(f){case 0:case 1:case 2:case 3:case 4:this.$f20=f;break;default:throw $.NG.$m2()}}},$aHi:function(f){if(null===f.$gFi($.O.$p56))throw $.NG.$m28(g[1]+$.O.$p56+g[2]);var i=new $.C.JLB(f),n=f.$gFi($.O.$p3),t=f.$gFi($.O.$p36),l=f.$gFi($.O.$p4),e=f.$gFi($.O.$p70),s=new $.C.JLB(f),u=null,a=$.T.KLB.$F(),o=$.T.KLB.$F(),h=$.T.KLB.$F(),p=$.T.KLB.$F(),v=$.T.KLB.$D(),m=null;if(function(f,i){f.$f21=$.T.KLB.$F();var n=i.$gFi($.O.$p56);if(null!==n)for(var t=i.$tti();t.$lz;t.$UE()){var l=t.$xA;1===n.$fF(l)&&f.$f21.$OL(l,l.$f7)}}(this,f),function(f,i){f.$f22=$.T.KLB.$F();var n=i.$gFi($.O.$p56);if(null!==n)for(var t=i.$tti();t.$lz;t.$UE()){var l=t.$xA;1===n.$fF(l)&&f.$f22.$OL(l,l.$f6)}}(this,f),null!==n){u=f.$qsi();for(var w=!1,F=f.$ssi();F.$lz;F.$UE()){var E=F.$wA;n.$Eu(E.$f2)!==n.$Eu(E.$f3)?(u.$Lu(E,!0),s.$Nwi(E),w=!0):u.$Lu(E,!1)}w||(f.$YEi(u),u=null);for(var O=f.$tti();O.$lz;O.$UE()){var A=O.$xA;n.$Eu(A)&&(v.$IL(l.$fF(A),A),i.$Pwi(A),a.$Lu(A,!0),o.$IL(A,t.$fF(A)),h.$IL(A,l.$fF(A)),p.$IL(A,e.$fF(A)))}null!==n&&f.$IKi($.O.$p3),null!==t&&f.$IKi($.O.$p36),null!==l&&f.$IKi($.O.$p4),null!==e&&f.$IKi($.O.$p70)}var y=new $.T.ZED.T1(this);if(r(this,f,y),null!==n){var B=new $.C.NLB(f);for(O=f.$tti();O.$lz;O.$UE()){A=O.$xA;if(B.$JCi(A)){var L=new $.LE;a.$Lu(A,!1);for(var d=B.$HCi(A).$m4();d.$p;){var _=d.$m(),C=t.$fF(_);if(null!==C){for(var U=0;U<L.$ms;U++)if(C===t.$fF(L.$ps(U))){C=null;break}null!==C&&L.$m(_)}}if(0===L.$ms){_=B.$HCi(A).$Mri();o.$IL(A,t.$fF(_)),h.$IL(A,l.$fF(_))}else if(o.$IL(A,t.$fF(L.$ps(0))),h.$IL(A,l.$fF(L.$ps(0))),L.$ms>1){for(var I=0;I<L.$ms;I++)for(var x=v.$fF(t.$fF(L.$ps(I))),T=0;T<L.$ms;T++){var z=v.$fF(t.$fF(L.$ps(T)));c.equals(l.$fF(z),t.$fF(x))&&L.$m3(T)}if(o.$IL(A,t.$fF(L.$ps(0))),h.$IL(A,l.$fF(L.$ps(0))),1===L.$ms);else{null===m&&(m=new $.C.RKB.$t);var D=f.$hri();m.$m6(D),a.$Lu(D,!0),h.$IL(D,D);for(U=1;U<L.$ms;U++)for(var b=L.$ps(0),K=!1;null!==b;){for(var R=v.$fF(t.$fF(b)),M=L.$ps(U);null!==M;){var G=v.$fF(t.$fF(M));if(G===R){if(L.$ps(0)!==b)for(var S=0;S<U;S++)L.$ss(S,b);L.$ss(U,M),K=!0;break}M=G}if(K)break;for(S=0;S<U;S++)L.$ss(S,b);b=R}for(U=0;U<L.$ms;U++)o.$IL(L.$ps(U),D);o.$IL(D,t.$fF(L.$ps(0))),i.$Pwi(D)}}}else a.$Lu(A,!1),o.$IL(A,t.$fF(A)),h.$IL(A,l.$fF(A))}B.$sqh()}var k=new $.T.ZED.T2(this,this.$do),V=new $.T.ZED.T4(i,n,a,o,h,p,k),N=new $.C.QBD;N.$OC=V;var Z=new $.C.KAD(N,null);Z.$VIh=this.$m1();try{new $.T.ZED.T3(this,Z,y,k).$dG(f)}finally{!function(f,i){null!==f.$f16&&(i.$IKi($.O.$p120),i.$YEi(f.$f16),f.$f16=null),null!==f.$f17&&(i.$IKi($.O.$p121),i.$YEi(f.$f17),f.$f17=null),null!==f.$f3&&(i.$IKi($.O.$p181),i.$YEi(f.$f3),f.$f3=null),null!==f.$f4&&(i.$IKi($.O.$p182),i.$YEi(f.$f4),f.$f4=null),null!==f.$f8&&(i.$IKi($.O.$p70),i.$ZEi(f.$f8),f.$f8=null),null!==f.$f9&&(i.$IKi($.O.$p26),i.$ZEi(f.$f9),f.$f9=null),null!==f.$f2&&(i.$IKi($.O.$p4),i.$ZEi(f.$f2),f.$f2=null),null!==f.$f15&&(i.$IKi($.O.$p36),i.$ZEi(f.$f15),f.$f15=null),null!==f.$f6&&(i.$IKi($.O.$p3),i.$ZEi(f.$f6),f.$f6=null),null!==f.$f&&(f.$f.$sE(),f.$f=null),f.$f19=null}(this,f),null!==n&&f.$pVi($.O.$p3,n),null!==t&&f.$pVi($.O.$p36,t),null!==l&&f.$pVi($.O.$p4,l),null!==e&&f.$pVi($.O.$p70,e)}if(i.$Qri(),null!==m){for(U=0;U<m.$f1;U++)f.$wAi(m.$ps(U));m=null}if(s.$Qri(),null!==this.$f1)for(U=0;U<this.$f1.$ms;U++)f.$wAi(this.$f11.$ps(U));if(null!==u){f.$pVi($.O.$p102,u);var Y=new $.C.GLD;Y.$YWh=$.O.$p102;try{Y.$dG(f)}finally{f.$IKi($.O.$p102),f.$YEi(u)}}},$f5:null,$f1:null,$f11:null,$static:{FAMILY_TYPE_DP_KEY:null,T2:new p(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,i){$.C.RBD.call(this,i),this.$f=f,this.$f1=$.T.KLB.$E()},$f1:null,"$m!":function($){return this.$f1.$fF($)},"$dG!":function($){if(this.$OC.$dG($),this.$f.$m1())for(var f=$.$tti();f.$lz;f.$UE())for(var i=f.$xA.$jFi(null);i.$lz;i.$UE()){var n=i.$wA;this.$f1.$IL(n,$.$BKi(n))}},$f:null}}),T3:new p(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,i,n,t){$.C.RBD.call(this,i),this.$f=f,this.$f2=n,this.$f1=t},$f2:null,$f1:null,"$dG!":function(f){if(this.$f.$m1()){var i=new $.C.NLB(f),n=$.T.KLB.$F();!function(f,i,n,t){for(var r=n.$gFi($.O.$p56),e=f.$f.$f11.$fph();e.$lz;e.$UE()){var s=e.$xA,u=i.$HCi(s);if(l(0,u,r)){t.$Lu(s,!0);for(var a=u.$fph();a.$lz;a.$UE()){var o=a.$xA;if(1!==r.$fF(o))for(var h=o.$jFi(null);h.$lz;h.$UE())f.$f.$f4.$IL(h.$wA,null)}}}}(this,i,f,n),this.$OC.$dG(f),function(f,i,n,t,l){for(var r=i.$gFi($.O.$p56),e=f.$f.$f11.$fph();e.$lz;e.$UE()){var s=e.$xA;if(t.$Eu(s)){for(var u=n.$HCi(s),a=null,o=null,h=u.$fph();h.$lz;h.$UE()){var p=h.$xA;1!==r.$fF(p)&&p.$f6>0&&(null===a?a=p:o=p)}if(null!==a&&null!==o){var v=i.$YAi(a),m=i.$YAi(o),c=l.$m(a.$f11).$f,w=l.$m(o.$f11).$f;if(v>m&&c<w||v<m&&c>w){var F=i.$ZFi(s);for(h=u.$fph();h.$lz;h.$UE()){p=h.$xA;var E=F.$f+F.$f3-(i.$YAi(p)-F.$f);i.$DZi(p,E,i.$ZAi(p))}}}}}}(this,f,i,n,this.$f1),function(f,i,n,t){for(var l=i.$gFi($.O.$p56),r=f.$f.$f11.$fph();r.$lz;r.$UE()){var e=r.$xA;if(t.$Eu(e))for(var s=n.$HCi(e).$fph();s.$lz;s.$UE()){var u=s.$xA;if(1!==l.$fF(u))for(var a=u.$jFi(null);a.$lz;a.$UE()){var o=a.$wA;i.$vXi(o,new $.C.SJB.$u(0,-i.$m38(u).$UB/2)),f.$f.$f4.$IL(o,$.T.ADD.$u(1,!0))}}}}(this,f,i,n),f.$pVi($.O.$p70,this.$f.$f8);var t=this.$f1.$OC;t.$dsh=0,this.$f2.$f1=!0,this.$OC.$dG(f),t.$dsh=1,this.$f2.$f1=!1,f.$IKi($.O.$p163),i.$sqh()}else this.$OC.$dG(f)},$f:null}}),T4:new p(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,i,n,t,l,r,e){$.C.RBD.call(this,e),this.$f=f,this.$f1=i,this.$f2=n,this.$f5=t,this.$f4=l,this.$f3=r},"$dG!":function(f){var i=new $.C.RKB.$u(this.$f.$Pui());this.$f.$Qri(),null!==this.$f1&&(f.$pVi($.O.$p3,this.$f2),f.$pVi($.O.$p36,this.$f5),f.$pVi($.O.$p4,this.$f4),f.$pVi($.O.$p70,this.$f3)),this.$eqi(f),this.$f.$Qwi(i),f.$IKi($.O.$p3),f.$IKi($.O.$p36),f.$IKi($.O.$p4),f.$IKi($.O.$p70)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new p(function(){return{$final:!0,constructor:function($,f){this.$f1=$,this.$f=f},$f1:null,$f:null,"equals!":function($){if(this===$)return!0;if(null===$||f.lang.getType(this)!==f.lang.getType($))return!1;var i=$;return this.$f===i.$f&&this.$f1===i.$f1},"hashCode!":function(){var $=this.$f1.hashCode();return $=31*$+this.$f.hashCode()}}}),T1:new p(function(){return{$final:!0,$with:[$.C.VAD],constructor:function(f){this.$f=f,this.$f1=!1,this.$f3=$.T.KLB.$F(),this.$f2=new $.T.ZED.T1.T(this,this.$f3,this.$f.$f21)},$f1:!1,$f2:null,$f3:null,"$dG!":function(f){if(1!==f.$fl){if(2===f.$fl&&this.$f.$f10&&this.$f.$f22.$lF(f.$el)<2&&this.$f.$f22.$lF(f.$ti)<2){for(var i=null,n=null,t=f.$tti();t.$lz;t.$UE()){var l=t.$xA;1!==f.$gFi($.O.$p56).$fF(l)?i=l:n=l}if(null!==i&&null!==n){var r=f.$m38(i),e=f.$m38(n);r.$UM(-r.$yB/2,0),e.$UM(-e.$yB/2,r.$UB+this.$f.$f14);for(var s=n.$jFi(null);s.$lz;s.$UE()){var u=s.$wA;($$=f.$m37(u)).$GF(),$$.$hC=new $.C.SJB.$u(0,0),$$.$iC=new $.C.SJB.$u(0,0)}var a=this.$f.$f8.$fF(i),o=new $.C.JJB(a.top,a.left,-this.$f.$f14-f.$m38(n).$UB,a.right);return void this.$f.$f8.$IL(i,o)}}var p=new $.C.RKB.$t;if(this.$f1)p.$nwi(f.$tti()),p.$Rwi(new $.T.ZED.T1.T1(this,f));else{var v=new $.C.RKB.$t,m=new $.C.RKB.$t;for(t=f.$tti();t.$lz;t.$UE()){l=t.$xA;1!==f.$gFi($.O.$p56).$fF(l)?v.$m6(l):m.$m6(l)}for(var c=null,w=0,F=0;F<v.$f1;F++){(J=v.$ps(F)).$Kui().$vA>w&&(w=J.$Kui().$vA,c=J)}v.$gy(c),p.$m6(c),function f(i,n,t,l,r){for(var e=new $.C.RKB.$t,s=r.$Kui();s.$lz;s.$UE()){var u=s.$xA;if(t.$gy(u)){var a=h(i,u,r,new $.C.RKB.$v(r));i.$f3.$OL(u,a),e.$m6(u)}}e.$Rwi(i.$f2);var o=r.$f2.$gFi($.O.$p56),p=!1;if(1===e.$f1&&l.indexOf(r)===l.$f1-1&&(p=!0),2===i.$f.$f20||4===i.$f.$f20)for(var v=0;v<e.$f1;v++)4===i.$f.$f20===(2===o.$fF(r))?l.$m6(e.$ps(v)):l.$ky(0,e.$ps(v));else if(0!==i.$f.$f20&&1===l.$f1&&1===e.$f1)3===i.$f.$f20===(2===o.$fF(r))?l.$m6(e.$ps(0)):l.$ky(0,e.$ps(0));else{var m=l.indexOf(r),c=l.indexOf(r)+1;for(v=0;v<e.$f1;v++)v%2!==0||p?l.$ky(c,e.$ps(v)):l.$ky(m,e.$ps(v)),c++}var w=new $.C.RKB.$t;for(v=0;v<e.$f1;v++){for(var F=!1,E=null,g=(u=e.$ps(v)).$Uui();g.$lz;g.$UE())if((E=g.$xA)!==r){F=!0;break}if(n.$gy(E)){w.$m6(E);var O=l.indexOf(u);l.indexOf(r)>O?l.$ky(l.indexOf(u),E):l.$ky(l.indexOf(u)+1,E)}else if(F){var A=0;for(l.$gy(u),g=u.$Uui();g.$lz;g.$UE())A=Math.max(l.indexOf(g.$xA),A);l.$ky(A,u)}}e=null;for(v=0;v<w.$f1;v++)f(i,n,t,l,w.$ps(v))}(this,v,m,p,c)}var E=new $.C.RKB.$t,g=new $.C.RKB.$t,O=new $.LE,A=0,y=0,B=Number.MAX_VALUE;for(F=0;F<p.$f1;F++){l=p.$ps(F);var L=f.$m38(l);1===f.$gFi($.O.$p56).$fF(l)?(E.$m6(l),O.$m(F),L.$UM(A+Math.max((this.$f.$f13-L.$yB)/2,L.$yB/4),-L.$UB/2),A=A+Math.max(1.5*L.$yB,this.$f.$f13)|0):(g.$m6(l),B=Math.min(L.$UB,B),y=Math.max(L.$UB,y),L.$UM(A,-L.$UB/2),A=A+L.$yB|0)}if(0!==this.$f.$f7)for(F=0;F<g.$f1;F++){L=f.$m38(g.$ps(F));1===this.$f.$f7?L.$UM(L.$jz,-(L.$UB-B/2)):L.$UM(L.$jz,-B/2)}var d=$.HF.$m11(p.$f1),_=-2;for(F=0;F<E.$f1;F++){var C=E.$ps(F),U=!1,I=$.ZE.$m8(O.$ps(F));if(this.$f.$f18||_===I-1&&0===d[_])U=!0;else for(var x=C.$Uui();x.$lz;x.$UE()){var T=x.$xA,z=p.indexOf(T)-I;if(Math.abs(z)>2){U=!0;break}}if(U)d[I]=1;else{var D=new $.C.SJB.$u(0,0);for(s=C.$jFi(null);s.$lz;s.$UE()){u=s.$wA;if(($$=f.$m37(u)).$GF(),0===this.$f.$f7)$$.$hC=D;else{L=f.$m38(u.$f2);f.$sWi(u,new $.C.SJB.$u(L.$jz+L.$yB/2,0))}$$.$iC=D}E.$m9(F),O.$m3(F),F--}_=I}var b,K=y/2;1===this.$f.$f7?K=B/2:-1===this.$f.$f7&&(K=y-B/2),b=K;for(F=0;F<E.$f1;F++){C=E.$ps(F);for(var R=$.ZE.$m8(O.$ps(F)),M=0,G=C.$Uui();G.$lz;G.$UE()){for(var S=p.indexOf(G.$xA),k=Math.min(R,S),V=Math.max(R,S),N=0,Z=k;Z<=V;Z++)N+=d[Z];M=Math.max(N,M)}L=f.$m38(C);var Y=K+this.$f.$f14+(L.$UB+this.$f.$f14)*(M-1);L.$UM(L.$jz,Y),b=Math.max(b,Y+L.$UB)}for(var j=0;j<g.$f1;j++){var J=g.$ps(j),H=p.indexOf(J),P=0,q=new $.C.VIB.$t;for(s=J.$gHi(null);s.$lz;s.$UE()){u=s.$wA;d[p.indexOf(u.$f3)]>0&&(q.$m6(u),P++)}if(P>0){var W=f.$m38(J).$yB/(P+1),Q=$.HF.$m11(q.$f1),X=$.HF.$m11(q.$f1);for(F=0;F<q.$f1;F++){Q[F]=p.indexOf(q.$ps(F).$f3)-H,Q[F]>0&&(Q[F]-=2*p.$f1),X[F]=W;for(Z=0;Z<F;Z++)Q[F]>Q[Z]?X[Z]+=W:X[F]+=W}for(F=0;F<q.$f1;F++){var $$;u=q.$ps(F);($$=f.$m37(u)).$GF(),$$.$iC=new $.C.SJB.$u(0,0);var f$=f.$m38(J),i$=f.$m38(u.$f3),n$=this.$f.$f19.$yt(u)?f$.$yB/2:X[F],t$=i$.$kz+i$.$UB/2;$$.$hC=new $.C.SJB.$u(n$-f$.$yB/2,0),$$.$kL(f$.$jz+n$,t$)}}}var l$=(a=this.$f.$f8.$fF(g.$ps(0))).top,r$=a.bottom;null!==a&&0===this.$f.$f7?l$=b-K:null!==a&&1===this.$f.$f7&&(r$=K-b),this.$f.$f8.$IL(g.$ps(0),new $.C.JJB(l$,a.left,r$,a.right))}},$f:null,$static:{T:new p(function(){return{$final:!0,$with:[$.C.EMB],constructor:function($,f,i){this.$f1=$,this.$f=f,this.$f2=i},$f:null,$f2:null,"$ly!":function(f,i){var n=$.T.ELB.$m(this.$f.$lF(f),this.$f.$lF(i));return 0!==n?n:$.T.ELB.$m(this.$f2.$lF(f),this.$f2.$lF(i))},$f1:null}}),T1:new p(function(){return{$final:!0,$with:[$.C.EMB],constructor:function($,f){this.$f1=$,this.$f=f},$f:null,"$ly!":function(f,i){return $.T.ELB.$B(this.$f.$YAi(f),this.$f.$YAi(i))},$f1:null}})}}}),$clinit:function(){$.T.ZED.FAMILY_TYPE_DP_KEY=$.O.$m1($.C.AFD.$class,$.C.ZED.$class,g[3],g[4])}}}})}),m("_$$_zcb",function($){$._$_xpo=new v(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),m("_$$_zcb",function($){$._$_ypo=new v(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})})}(y.lang.module("yfiles._R"),y,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);export default y;